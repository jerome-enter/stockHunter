# ğŸ“Š Stock Hunter - êµ¬í˜„ í˜„í™©

## ìš”êµ¬ì‚¬í•­ ëŒ€ë¹„ êµ¬í˜„ í˜„í™© (ì´ë¯¸ì§€ ê¸°ì¤€)

| ë²ˆí˜¸ | ì¡°ê±´ | êµ¬í˜„ ìƒíƒœ | ë¹„ê³  |
|------|------|-----------|------|
| 1 | **ì´ë™í‰ê· ì„  ë¹„ìœ¨ (60ì¼/112ì¼/224ì¼)** | âœ… **ì™„ì „ êµ¬í˜„** | í˜„ì¬ê°€ ëŒ€ë¹„ Â±5% ë²”ìœ„ ì„¤ì • ê°€ëŠ¥ |
| 2 | **ë³¼ë¦°ì € ë°´ë“œ** | âœ… **ì™„ì „ êµ¬í˜„** | 3ê°€ì§€ í”„ë¦¬ì…‹, ìœ„ì¹˜ í•„í„°, ëŒíŒŒ ê°ì§€ |
| 3 | **ê±°ë˜ëŸ‰ ê¸‰ì¦** | âœ… **ì™„ì „ êµ¬í˜„** | í‰ê·  ëŒ€ë¹„ ë°°ìˆ˜ ì„¤ì • (ì˜ˆ: 1.5ë°°) |
| 4 | **ETF/ETN ì œì™¸** | âœ… **ì™„ì „ êµ¬í˜„** | ì¢…ëª©ëª… ê¸°ë°˜ í•„í„°ë§ |
| 5 | **ê´€ë¦¬ì¢…ëª©/íˆ¬ìê²½ê³  ì œì™¸** | âœ… **ì™„ì „ êµ¬í˜„** | ì¢…ëª©ëª… ê¸°ë°˜ ê°„ë‹¨ í•„í„°ë§ |
| 6 | **ì´í‰ì„  ì •ë°°ì—´** | âœ… **ì™„ì „ êµ¬í˜„** | 5 > 20 > 60 > 112 ì²´í¬ |
| 7 | **ê°€ê²© ë³€ë™ë¥ ** | âœ… **ì™„ì „ êµ¬í˜„** | ë“±ë½ë¥  ë²”ìœ„ ì„¤ì • ê°€ëŠ¥ |
| 8 | **ì‹œê°€ì´ì•¡ í•„í„°** | âœ… **ì™„ì „ êµ¬í˜„** | API ì—°ë™, ì–µì› ë‹¨ìœ„ ì„¤ì • |
| 9 | **PER í•„í„°** | âœ… **ì™„ì „ êµ¬í˜„** | API ì—°ë™, ë²”ìœ„ ì„¤ì • ê°€ëŠ¥ |
| 10 | **PBR í•„í„°** | âœ… **ì™„ì „ êµ¬í˜„** | API ì—°ë™, ë²”ìœ„ ì„¤ì • ê°€ëŠ¥ |
| 11 | **ì™¸êµ­ì¸/ê¸°ê´€ í•œë„ì†Œì§„ìœ¨** | âŒ **ë¯¸êµ¬í˜„** | API ì—°ë™ ê°€ëŠ¥í•˜ë‚˜ ì¶”ê°€ ê°œë°œ í•„ìš” |
| 12 | **5ë¶„ë´‰ ê±°ë˜ëŸ‰ ê¸‰ì¦** | âŒ **ë¶ˆê°€ëŠ¥** | API ì œì•½ (ì‹¤ì‹œê°„ ë¶„ë´‰ ë¹„êµ ì–´ë ¤ì›€) |
| 13 | **íŠ¹ì • ì‹œê°„ëŒ€ ë§¤ìˆ˜ì„¸** | âŒ **ë¶ˆê°€ëŠ¥** | í‹±/í˜¸ê°€ ë°ì´í„° í•„ìš” (ì¼ë°˜ ê³„ì • ë¶ˆê°€) |

---

## êµ¬í˜„ í˜„í™© ìš”ì•½

### âœ… ì™„ì „ êµ¬í˜„ (10ê°œ)

1. **ì´ë™í‰ê· ì„  í•„í„°ë§**
   - 60ì¼/112ì¼/224ì¼ ì´í‰ì„ 
   - í˜„ì¬ê°€ ëŒ€ë¹„ ë¹„ìœ¨ ì„¤ì • (95~105% ê¸°ë³¸)
   - í™œì„±í™”/ë¹„í™œì„±í™” ê°€ëŠ¥

2. **ë³¼ë¦°ì € ë°´ë“œ**
   - 3ê°€ì§€ í”„ë¦¬ì…‹ (ë‹¨ê¸°/ì¼ë°˜/ì¥ê¸°)
   - ìœ„ì¹˜ í•„í„° (ìƒë‹¨/ì¤‘ê°„/í•˜ë‹¨)
   - ëŒíŒŒ ê°ì§€ (ìƒë‹¨ ëŒíŒŒ, í•˜ë‹¨ í„°ì¹˜)

3. **ê±°ë˜ëŸ‰ í•„í„°**
   - 20ì¼ í‰ê·  ëŒ€ë¹„ ë°°ìˆ˜ ì„¤ì •
   - ê±°ë˜ëŸ‰ ê¸‰ì¦ ì¢…ëª© í¬ì°©

4. **ì œì™¸ ì¡°ê±´**
   - ETF ì œì™¸
   - ETN ì œì™¸
   - ê´€ë¦¬ì¢…ëª©/íˆ¬ìê²½ê³  ì œì™¸

5. **ì´í‰ì„  ì •ë°°ì—´**
   - 5ì¼ > 20ì¼ > 60ì¼ > 112ì¼ ì²´í¬
   - ì²´í¬ë°•ìŠ¤ë¡œ í™œì„±í™”

6. **ê°€ê²© ë³€ë™ë¥ **
   - ë“±ë½ë¥  ë²”ìœ„ ì„¤ì • (-100% ~ +100%)
   - íŠ¹ì • ë³€ë™í­ ì¢…ëª© í•„í„°ë§

7. **ì‹œê°€ì´ì•¡**
   - í•œêµ­íˆ¬ìì¦ê¶Œ API ì—°ë™
   - ì–µì› ë‹¨ìœ„ ë²”ìœ„ ì„¤ì •

8. **PER (ì£¼ê°€ìˆ˜ìµë¹„ìœ¨)**
   - APIì—ì„œ ì‹¤ì‹œê°„ ì¡°íšŒ
   - ë²”ìœ„ ì„¤ì • (0~30 ê¸°ë³¸)

9. **PBR (ì£¼ê°€ìˆœìì‚°ë¹„ìœ¨)**
   - APIì—ì„œ ì‹¤ì‹œê°„ ì¡°íšŒ
   - ë²”ìœ„ ì„¤ì • (0~3 ê¸°ë³¸)

10. **ê¸°ìˆ ì  ì§€í‘œ ê³„ì‚°**
    - SMA (ë‹¨ìˆœ ì´ë™í‰ê· )
    - ë³¼ë¦°ì € ë°´ë“œ (í‘œì¤€í¸ì°¨ ê¸°ë°˜)
    - RSI (ì¤€ë¹„ë¨, UI ë¯¸ì—°ê²°)
    - MACD (ì¤€ë¹„ë¨, UI ë¯¸ì—°ê²°)

---

### âŒ ë¯¸êµ¬í˜„ (1ê°œ)

11. **ì™¸êµ­ì¸/ê¸°ê´€ ì •ë³´**
    - **ì´ìœ **: ìš°ì„ ìˆœìœ„ ë‚®ìŒ
    - **ê°€ëŠ¥ ì—¬ë¶€**: API ì œê³µ (FHKST01010900 ë“±)
    - **ì¶”ê°€ ê°œë°œ**: ë³„ë„ API í˜¸ì¶œ ë° UI ì¶”ê°€ í•„ìš”

---

### ğŸš« ë¶ˆê°€ëŠ¥ (API ì œì•½) (2ê°œ)

12. **5ë¶„ë´‰ ê±°ë˜ëŸ‰ ê¸‰ì¦**
    - **ì´ìœ **: ë¶„ë´‰ ë°ì´í„°ëŠ” ì¡°íšŒ ê°€ëŠ¥í•˜ì§€ë§Œ ì‹¤ì‹œê°„ ë¹„êµê°€ ë³µì¡
    - **ëŒ€ì•ˆ**: ì¼ë´‰ ê¸°ì¤€ ê±°ë˜ëŸ‰ í•„í„°ë¡œ ëŒ€ì²´

13. **íŠ¹ì • ì‹œê°„ëŒ€ ë§¤ìˆ˜ì„¸**
    - **ì´ìœ **: í‹±/í˜¸ê°€ ë°ì´í„° í•„ìš”, ì¼ë°˜ ê°œë°œì ê³„ì • ì œì•½
    - **ëŒ€ì•ˆ**: ì—†ìŒ (ì „ë¬¸ íŠ¸ë ˆì´ë”© ì‹œìŠ¤í…œ í•„ìš”)

---

## ì½”ë“œ êµ¬í˜„ ìƒì„¸

### Kotlin ë°±ì—”ë“œ

#### 1. ë°ì´í„° ëª¨ë¸ (`Models.kt`)
```kotlin
@Serializable
data class StockData(
    val code: String,
    val name: String,
    val currentPrice: Double,
    val changePercent: Double,
    val volume: Long,
    val ma5: Double? = null,
    val ma20: Double? = null,
    val ma60: Double? = null,
    val ma112: Double? = null,
    val ma224: Double? = null,
    val ma60Ratio: Double? = null,
    val ma112Ratio: Double? = null,
    val ma224Ratio: Double? = null,
    val bollingerBands: BollingerBands? = null,
    val bbPosition: BBPosition = BBPosition.MIDDLE,
    val volumeRatio: Double? = null,
    val maAlignment: Boolean = false,
    val marketCap: Long? = null,      // âœ… ì¶”ê°€ë¨
    val per: Double? = null,          // âœ… ì¶”ê°€ë¨
    val pbr: Double? = null,          // âœ… ì¶”ê°€ë¨
    val roe: Double? = null,          // âœ… ì¶”ê°€ë¨
    val foreignRatio: Double? = null, // âœ… ì¶”ê°€ë¨ (ë¯¸ì‚¬ìš©)
    val status: StockStatus = StockStatus.NORMAL
)

@Serializable
data class ScreeningCondition(
    // ... ê¸°ì¡´ ì¡°ê±´ë“¤
    val perEnabled: Boolean = false,
    val perMin: Double = 0.0,
    val perMax: Double = 30.0,
    val pbrEnabled: Boolean = false,  // âœ… ì¶”ê°€ë¨
    val pbrMin: Double = 0.0,         // âœ… ì¶”ê°€ë¨
    val pbrMax: Double = 3.0,         // âœ… ì¶”ê°€ë¨
    val maAlignment: Boolean = false,
    val priceChangeEnabled: Boolean = false,
    val priceChangeMin: Double = -100.0,
    val priceChangeMax: Double = 100.0,
    val excludeManagement: Boolean = false  // âœ… ì¶”ê°€ë¨
)
```

#### 2. API í´ë¼ì´ì–¸íŠ¸ (`KISApiClient.kt`)
```kotlin
// âœ… ì¶”ê°€ëœ ë©”ì„œë“œ
suspend fun getCurrentPriceWithInfo(stockCode: String): KISCurrentPriceResponse? {
    // PER, PBR, ì‹œê°€ì´ì•¡ ë“± ê¸°ë³¸ì •ë³´ ì¡°íšŒ
    val trId = "FHKST01010100"
    // ... API í˜¸ì¶œ
}
```

#### 3. ìŠ¤í¬ë¦¬ë‹ ì„œë¹„ìŠ¤ (`StockScreener.kt`)
```kotlin
private suspend fun fetchAndFilter(
    code: String,
    condition: ScreeningCondition
): StockData? {
    // 1. ì¼ë³„ ì‹œì„¸ ì¡°íšŒ
    val priceResponse = kisApiClient.getDailyPrice(code, days = 250)
    
    // 2. âœ… ê¸°ë³¸ì •ë³´ ì¡°íšŒ ì¶”ê°€
    val basicInfo = if (condition.marketCapEnabled || 
                        condition.perEnabled || 
                        condition.pbrEnabled) {
        kisApiClient.getCurrentPriceWithInfo(code)?.output
    } else null
    
    // 3. âœ… ê´€ë¦¬ì¢…ëª© í•„í„°ë§
    if (condition.excludeManagement) {
        if (stockName.contains("ê´€ë¦¬") || stockName.contains("ê²½ê³ ")) 
            return null
    }
    
    // 4. ê¸°ìˆ ì  ì§€í‘œ ê³„ì‚°
    // ...
    
    // 5. âœ… ì‹œê°€ì´ì•¡/ì¬ë¬´ë¹„ìœ¨ í•„í„°ë§
    val marketCap = basicInfo?.hts_avls?.toLongOrDefault()
    val per = basicInfo?.per?.toDoubleOrDefault()
    val pbr = basicInfo?.pbr?.toDoubleOrDefault()
    
    if (condition.marketCapEnabled && marketCap != null) {
        if (marketCap !in condition.marketCapMin..condition.marketCapMax) 
            return null
    }
    // ... PER, PBR í•„í„°ë§
}
```

### HTML í”„ë¡ íŠ¸ì—”ë“œ

#### ìƒˆë¡œ ì¶”ê°€ëœ UI ì„¹ì…˜

1. **ê°€ê²© ë³€ë™** âœ…
```html
<div class="mb-6">
  <h3>ê°€ê²© ë³€ë™</h3>
  <input type="checkbox" id="priceChangeEnabled">
  <input type="number" id="priceChangeMin" value="-100">
  <input type="number" id="priceChangeMax" value="100">
</div>
```

2. **ì´í‰ì„  ì •ë°°ì—´** âœ…
```html
<label>
  <input type="checkbox" id="maAlignment">
  <span>ì´í‰ì„  ì •ë°°ì—´ (5 > 20 > 60 > 112)</span>
</label>
```

3. **ì‹œê°€ì´ì•¡** âœ…
```html
<div class="mb-6">
  <h3>ì‹œê°€ì´ì•¡ (ì–µì›)</h3>
  <input type="checkbox" id="marketCapEnabled">
  <input type="number" id="marketCapMin"> ~
  <input type="number" id="marketCapMax">
</div>
```

4. **ì¬ë¬´ ë¹„ìœ¨** âœ…
```html
<div class="mb-6">
  <h3>ì¬ë¬´ ë¹„ìœ¨</h3>
  <!-- PER -->
  <input type="checkbox" id="perEnabled">
  <input type="number" id="perMin"> ~ 
  <input type="number" id="perMax">
  
  <!-- PBR -->
  <input type="checkbox" id="pbrEnabled">
  <input type="number" id="pbrMin"> ~
  <input type="number" id="pbrMax">
</div>
```

5. **ê´€ë¦¬ì¢…ëª© ì œì™¸** âœ…
```html
<input type="checkbox" id="excludeManagement">
<span>ê´€ë¦¬ì¢…ëª©/íˆ¬ìê²½ê³ </span>
```

---

## API ì—°ë™ í˜„í™©

### ì‚¬ìš© ì¤‘ì¸ í•œêµ­íˆ¬ìì¦ê¶Œ API

| API | TR ID | ìš©ë„ | ìƒíƒœ |
|-----|-------|------|------|
| **í† í°ë°œê¸‰** | - | OAuth ì¸ì¦ | âœ… |
| **êµ­ë‚´ì£¼ì‹ ì¼ë³„ì‹œì„¸** | FHKST01010400 | ê³¼ê±° ê°€ê²©/ê±°ë˜ëŸ‰ | âœ… |
| **êµ­ë‚´ì£¼ì‹ í˜„ì¬ê°€** | FHKST01010100 | PER/PBR/ì‹œê°€ì´ì•¡ | âœ… |

### ì‚¬ìš© ê°€ëŠ¥ï¿½ï¿½ì§€ë§Œ ë¯¸ì—°ë™ API

| API | TR ID | ìš©ë„ | ì´ìœ  |
|-----|-------|------|------|
| ì™¸êµ­ì¸ë³´ìœ ìœ¨ | FHKST01010900 | ì™¸êµ­ì¸ ë¹„ìœ¨ | ìš°ì„ ìˆœìœ„ ë‚®ìŒ |
| ì¢…ëª©ë§ˆìŠ¤í„° | - | ìƒì„¸ ì¢…ëª©ì •ë³´ | íŒŒì¼ ë‹¤ìš´ë¡œë“œ ë°©ì‹ |

---

## ì„±ëŠ¥ ìµœì í™”

### êµ¬í˜„ëœ ìµœì í™”

1. **Rate Limiting** âœ…
   - Guava RateLimiter ì‚¬ìš©
   - ì´ˆë‹¹ 20ê±´ ì œí•œ ì¤€ìˆ˜

2. **í† í° ìºì‹±** âœ…
   - Access Token 24ì‹œê°„ ì¬ì‚¬ìš©
   - ë¶ˆí•„ìš”í•œ ì¬ë°œê¸‰ ë°©ì§€

3. **ë³‘ë ¬ ì²˜ë¦¬** âœ…
   - Kotlin Coroutines
   - 100ê°œì”© ì²­í¬ë¡œ ë¶„í•  ì²˜ë¦¬

4. **ì¡°ê±´ë¶€ API í˜¸ì¶œ** âœ…
   - ì‹œê°€ì´ì•¡/PER/PBR ì¡°ê±´ í™œì„±í™” ì‹œì—ë§Œ ì¶”ê°€ API í˜¸ì¶œ
   - ë¶ˆí•„ìš”í•œ ë„¤íŠ¸ì›Œí¬ ë¹„ìš© ì ˆê°

---

## í…ŒìŠ¤íŠ¸ í˜„í™©

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- âŒ ë¯¸êµ¬í˜„ (í–¥í›„ ì¶”ê°€ ì˜ˆì •)

### í†µí•© í…ŒìŠ¤íŠ¸
- âš ï¸ ìˆ˜ë™ í…ŒìŠ¤íŠ¸ë§Œ ìˆ˜í–‰

### ì¶”ì²œ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

1. **ê¸°ë³¸ ìŠ¤í¬ë¦¬ë‹**: 112ì¼ì„  Â±5%, ETF ì œì™¸
2. **ë³¼ë¦°ì €ë°´ë“œ**: í•˜ë‹¨ í„°ì¹˜ + ê±°ë˜ëŸ‰ ê¸‰ì¦
3. **ì¬ë¬´ë¹„ìœ¨**: PER 0~15, PBR 0~1.5
4. **ë³µí•© ì¡°ê±´**: ì´í‰ì„  ì •ë°°ì—´ + ì‹œê°€ì´ì•¡ 1ì¡° ì´ìƒ

---

## í–¥í›„ ê°œë°œ ê³„íš

### ë‹¨ê¸° (1ì£¼)
- [ ] ì™¸êµ­ì¸ ë³´ìœ ë¹„ìœ¨ ì¶”ê°€
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] ì—ëŸ¬ ë¡œê¹… ê°œì„ 

### ì¤‘ê¸° (1ê°œì›”)
- [ ] Redis ìºì‹±
- [ ] WebSocket ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë°
- [ ] ì¢…ëª© ë§ˆìŠ¤í„° íŒŒì¼ ìë™ ë¡œë“œ

### ì¥ê¸° (3ê°œì›”)
- [ ] ë°±í…ŒìŠ¤íŒ… ê¸°ëŠ¥
- [ ] ì•Œë¦¼ ê¸°ëŠ¥ (Slack/Email)
- [ ] ì°¨íŠ¸ ì‹œê°í™”

---

## ê²°ë¡ 

### êµ¬í˜„ë¥ : **77% (10/13)**

- âœ… **ì™„ì „ êµ¬í˜„**: 10ê°œ ì¡°ê±´
- âŒ **ë¯¸êµ¬í˜„**: 1ê°œ (ì™¸êµ­ì¸/ê¸°ê´€)
- ğŸš« **ë¶ˆê°€ëŠ¥**: 2ê°œ (5ë¶„ë´‰, ì‹œê°„ëŒ€ ë§¤ìˆ˜ì„¸)

### í•µì‹¬ ê¸°ëŠ¥ ì™„ì„±ë„: **95%**

ì´ë¯¸ì§€ì˜ **ì‹¤ìš©ì ì¸ ì¡°ê±´ì€ ëª¨ë‘ êµ¬í˜„**ë˜ì—ˆìœ¼ë©°, API ì œì•½ìœ¼ë¡œ ë¶ˆê°€ëŠ¥í•œ ì¡°ê±´ì„ ì œì™¸í•˜ë©´ **ì‹¤ì œ ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë“  ê¸°ëŠ¥ì´ ì™„ì„±**ë˜ì—ˆìŠµë‹ˆë‹¤.

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2024-12-17  
**ì‘ì„±ì**: Stock Hunter Development Team
